# Идентификация клиентов

Существует два идентификатора клиентов - токен и player Id.

## Токен

!!! abstract "Уникальный идентификатор для определения клиента сервером, **недоступный другим клиентам**"

Любое сообщение для сервера (REST-запрос или Вебсокет-событие), где требуется определить, от кого
оно исходит, должно содержать **token**. Значение токена определяет сам клиент, однако он
*должен быть уникальным для каждого клиента*.

## Player Id

!!! abstract "Уникальный идентификатор клиента в игре, **доступный другим клиентам** "

Player Id - это хэшированный токен клиента, и используется как публичный идентификатор в игре.

## Пример

Клиент А, играющий за Миледи, посылает событие для взятия карты припаса. В поле `client_token` он передаёт свой уникальный токен, *известный только ему*.

``` json hl_lines="3" title="Отправляемое событие"
    {
        "type": "TakeSupply",
        "client_token": "supersecret",
        "targets": "Server",
        "supply": {
            "type": "SharkBait",
            "strength": 0,
            "points": 0
        }
    }
```

Клиент Б, играющий за Капитана, получает событие, что какой-то клиент взял карту припаса.
Чтобы определить, кто взял карту, он использует поле `player_id`.

``` json hl_lines="3" title="Полученое от другого игрока событие"
    {
        "type": "TakeSupply",
        "player_id": "s$p@rs@cr@t", // (hashed supersecret)
        "observed": true,
        "targets": "Server",
        "supply": {} // (1)
    }


```
{ .annotate }

1. Информация о переданной карте скрыта для клиента Б, так как это [Observable](/docs/events/#Observable) событие

Клиент Б проверяет состояние игры и видит, что карту припаса взял клиент с персонажем Миледи.

``` json hl_lines="18" title="Состояние игры"
    {
    ...
    "players": {
        ...
        "k!11yc^t": {
        ...
        "observed": false,
        "name": "Мегакрутыш",
        "character": {
            "name": "Captain",
            "attack": 7,
            "health": 7,
            "survival_bonus": 5,
            "order": 3
        },
        ...
        },
        "s$p@rs@cr@t": {
        ...
        "observed": true,
        "name": "Шпионистый",
        "character": {
            "name": "Lady",
            "attack": 4,
            "health": 4,
            "survival_bonus": 8,
            "order": 1
        },
        ...
        },
        ...
    ],
    ...
    }
```